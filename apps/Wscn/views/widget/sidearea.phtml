<?$newsPager = $this->tag->component('post', array('status' => 'published', 'limit' => 3, 'q' => $query['q'], 'order' => '-created_at'));$posts = $newsPager->items;?>
<?if($posts->count() > 0):?>
<a class="side-title type-blue with-more" href="/search?q=<?=$query['q']?>">
    相关新闻
</a>
<ul class=" news-list">
    <?foreach($posts as $post):?>
    <li class="news">
    <a class="title" href="<?=$post->getUrl()?>"><?=$post->title?></a>
    </li>
    <?endforeach?>
</ul>
<?endif?>

<?$items = $pager->items;?>
<?if($items->count() > 0):?>
<a class="side-title type-blue with-more" href="/livenews" style="margin-bottom: 2px">
    实时新闻
</a>
<ul id="left-side-livenews" class="livenews-list size-sm">
    <?foreach($items as $item):?>
    <li class="news" data-livenews-id="<?=$item->id?>">
        <span class="time"><?=$this->tag->datetime($item->createdAt, 'H:i')?></span>
        <div class="content">
            <?=str_replace("\n", '<br />', strip_tags($item->getContentHtml()))?>
            <div class="sign"></div>
        </div>
    </li>
    <?endforeach?>
</ul>
<?endif?>
